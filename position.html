<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Distance Tracker</title>
</head>
<body>
<div id="distance"></div>

<script>
let startPosition = null;
let totalDistance = 0;

function calculateDistance(position) {
  if (startPosition) {
    const { latitude: lat1, longitude: lon1 } = startPosition.coords;
    const { latitude: lat2, longitude: lon2 } = position.coords;
    const distance = calculateDistanceBetweenPoints(lat1, lon1, lat2, lon2);
    totalDistance += distance;
    document.getElementById('distance').textContent = `Total Distance: ${totalDistance.toFixed(2)} meters`;
  }
  startPosition = position;
}

function calculateDistanceBetweenPoints(lat1, lon1, lat2, lon2) {
  const R = 6371e3; // Earth radius in meters
  const φ1 = lat1 * Math.PI / 180;
  const φ2 = lat2 * Math.PI / 180;
  const Δφ = (lat2 - lat1) * Math.PI / 180;
  const Δλ = (lon2 - lon1) * Math.PI / 180;

  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +
            Math.cos(φ1) * Math.cos(φ2) *
            Math.sin(Δλ / 2) * Math.sin(Δλ / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

  return R * c;
}

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.watchPosition(calculateDistance);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}

getLocation();
</script>
</body>
</html>
